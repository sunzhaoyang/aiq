<div align="center">

# AIQ

**ä¸€ä¸ªå°†è‡ªç„¶è¯­è¨€è½¬æ¢ä¸º SQL æŸ¥è¯¢çš„æ™ºèƒ½ SQL å®¢æˆ·ç«¯**

[![Go Version](https://img.shields.io/badge/go-1.21+-00ADD8?style=flat-square&logo=go)](https://golang.org)
[![License](https://img.shields.io/badge/license-Apache%202.0-blue.svg?style=flat-square)](LICENSE)

*ç”¨è‡ªç„¶è¯­è¨€æé—®ï¼Œè·å¾—ç²¾ç¡®çš„ SQL æŸ¥è¯¢ï¼Œå°†ç»“æœå¯è§†åŒ–ä¸ºç²¾ç¾çš„å›¾è¡¨*

</div>

---

## ğŸ“– ç®€ä»‹

AIQ (AI Query) æ˜¯ä¸€ä¸ªæ™ºèƒ½ SQL å®¢æˆ·ç«¯ï¼Œé€šè¿‡è‡ªç„¶è¯­è¨€ä¸æ•°æ®åº“äº¤äº’ã€‚æ— éœ€ç¼–å†™ SQLï¼Œåªéœ€ç”¨è‡ªç„¶è¯­è¨€æé—®ï¼ŒAIQ ä¼šè‡ªåŠ¨ç”Ÿæˆ SQL æŸ¥è¯¢å¹¶æ‰§è¡Œï¼Œè¿˜èƒ½å°†ç»“æœå¯è§†åŒ–ä¸ºç²¾ç¾çš„å›¾è¡¨ã€‚

### âœ¨ æ ¸å¿ƒç‰¹æ€§

- ğŸ—£ï¸ **è‡ªç„¶è¯­è¨€æŸ¥è¯¢** - ç”¨ä¸­æ–‡æˆ–è‹±æ–‡æé—®ï¼Œè‡ªåŠ¨ç”Ÿæˆ SQL
- ğŸ’¬ **å¤šè½®å¯¹è¯** - ä¿æŒå¯¹è¯ä¸Šä¸‹æ–‡ï¼Œæ”¯æŒæŸ¥è¯¢ä¼˜åŒ–å’Œåç»­é—®é¢˜
- ğŸ“Š **å›¾è¡¨å¯è§†åŒ–** - æ”¯æŒæŸ±çŠ¶å›¾ã€æŠ˜çº¿å›¾ã€é¥¼å›¾ã€æ•£ç‚¹å›¾
- ğŸ”Œ **å¤šæ•°æ®åº“æ”¯æŒ** - [seekdb](https://www.oceanbase.ai/)ã€MySQLã€PostgreSQL
- ğŸ¨ **ç¾è§‚çš„ CLI ç•Œé¢** - æµç•…çš„äº¤äº’ä½“éªŒå’Œå½©è‰²è¾“å‡º
- âš™ï¸ **ç®€å•é…ç½®** - å¼•å¯¼å¼é…ç½®å‘å¯¼
- ğŸ”’ **æœ¬åœ°å­˜å‚¨** - é…ç½®å’Œè¿æ¥ä¿¡æ¯å®‰å…¨å­˜å‚¨åœ¨æœ¬åœ°
- ğŸ’¾ **ä¼šè¯æŒä¹…åŒ–** - ä¿å­˜å’Œæ¢å¤å¯¹è¯ä¼šè¯

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…

#### ä»æºç æ„å»º

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/aiq/aiq.git
cd aiq

# æ„å»ºäºŒè¿›åˆ¶æ–‡ä»¶
go build -o aiq cmd/aiq/main.go

# å®‰è£…åˆ°ç³»ç»Ÿè·¯å¾„ï¼ˆå¯é€‰ï¼‰
sudo mv aiq /usr/local/bin/
```

### é¦–æ¬¡ä½¿ç”¨

1. **å¯åŠ¨ AIQ**
   ```bash
   aiq
   ```

2. **é…ç½® LLM**
   - é¦–æ¬¡è¿è¡Œä¼šå¯åŠ¨é…ç½®å‘å¯¼
   - è¾“å…¥ LLM API URLï¼ˆå¦‚ï¼š`https://api.openai.com/v1`ï¼‰
   - è¾“å…¥ API Key
   - è¾“å…¥æ¨¡å‹åç§°ï¼ˆå¦‚ï¼š`gpt-4`ï¼‰
   - é…ç½®ä¿å­˜åœ¨ `~/.aiqconfig/config.yaml`

3. **æ·»åŠ æ•°æ®æº**
   ```bash
   # åœ¨ä¸»èœå•ä¸­é€‰æ‹© source
   # é€‰æ‹© add æ·»åŠ æ–°è¿æ¥
   # è¾“å…¥æ•°æ®åº“è¿æ¥ä¿¡æ¯ï¼š
   #   - æ•°æ®åº“ç±»å‹ï¼šseekdb / MySQL / PostgreSQL
   #   - ä¸»æœºåœ°å€
   #   - ç«¯å£
   #   - æ•°æ®åº“å
   #   - ç”¨æˆ·åå’Œå¯†ç 
   ```

4. **å¼€å§‹æŸ¥è¯¢**
   ```bash
   # åœ¨ä¸»èœå•ä¸­é€‰æ‹© chat
   # é€‰æ‹©æ•°æ®æº
   # è¾“å…¥è‡ªç„¶è¯­è¨€é—®é¢˜ï¼Œä¾‹å¦‚ï¼š
   #   "æ˜¾ç¤ºæœ€è¿‘ä¸€å‘¨çš„é”€å”®é¢"
   #   "ç»Ÿè®¡æ¯ä¸ªç±»åˆ«çš„å•†å“æ•°é‡"
   #   "æŸ¥çœ‹ç”¨æˆ·æ³¨å†Œè¶‹åŠ¿"
   ```

## ğŸ’¡ åŠŸèƒ½ç‰¹æ€§

### 1. è‡ªç„¶è¯­è¨€è½¬ SQL

æ— éœ€ç¼–å†™ SQLï¼Œç›´æ¥ç”¨è‡ªç„¶è¯­è¨€æé—®ï¼š

```
aiq> æ˜¾ç¤ºæœ€è¿‘ä¸€å‘¨çš„è®¢å•æ€»æ•°
```

AIQ ä¼šè‡ªåŠ¨ï¼š
- ç†è§£ä½ çš„é—®é¢˜
- ç”Ÿæˆå¯¹åº”çš„ SQL æŸ¥è¯¢
- æ‰§è¡ŒæŸ¥è¯¢å¹¶è¿”å›ç»“æœ

### 2. å›¾è¡¨å¯è§†åŒ–

æŸ¥è¯¢ç»“æœå¯ä»¥è‡ªåŠ¨å¯è§†åŒ–ä¸ºå¤šç§å›¾è¡¨ç±»å‹ï¼š

#### ğŸ“Š æŸ±çŠ¶å›¾ (Bar Chart)
é€‚ç”¨äºåˆ†ç±»æ•°æ®å¯¹æ¯”ï¼Œä¾‹å¦‚ï¼š
```sql
SELECT category, COUNT(*) AS count FROM products GROUP BY category;
```

#### ğŸ“ˆ æŠ˜çº¿å›¾ (Line Chart)
é€‚ç”¨äºæ—¶é—´åºåˆ—æ•°æ®ï¼Œä¾‹å¦‚ï¼š
```sql
SELECT date, SUM(amount) AS total FROM sales GROUP BY date ORDER BY date;
```

#### ğŸ¥§ é¥¼å›¾ (Pie Chart)
é€‚ç”¨äºæ¯”ä¾‹åˆ†å¸ƒï¼Œä¾‹å¦‚ï¼š
```sql
SELECT status, COUNT(*) AS count FROM orders GROUP BY status;
```

#### ğŸ“‰ æ•£ç‚¹å›¾ (Scatter Plot)
é€‚ç”¨äºæ•°å€¼å…³ç³»åˆ†æï¼Œä¾‹å¦‚ï¼š
```sql
SELECT price, sales FROM products;
```

### 3. æ™ºèƒ½å›¾è¡¨æ£€æµ‹

AIQ ä¼šæ ¹æ®æŸ¥è¯¢ç»“æœçš„æ•°æ®ç»“æ„è‡ªåŠ¨æ£€æµ‹æœ€é€‚åˆçš„å›¾è¡¨ç±»å‹ï¼š
- **åˆ†ç±» + æ•°å€¼** â†’ æŸ±çŠ¶å›¾æˆ–é¥¼å›¾
- **æ—¶é—´ + æ•°å€¼** â†’ æŠ˜çº¿å›¾
- **æ•°å€¼ + æ•°å€¼** â†’ æ•£ç‚¹å›¾

### 4. å¤šæ•°æ®åº“æ”¯æŒ

æ”¯æŒå¤šç§æ•°æ®åº“ç±»å‹ï¼š
- **[seekdb](https://www.oceanbase.ai/)** - AI åŸç”Ÿæœç´¢æ•°æ®åº“ï¼Œç»Ÿä¸€å…³ç³»å‹ã€å‘é‡ã€æ–‡æœ¬ã€JSON å’Œ GIS äºå•ä¸€å¼•æ“
- **MySQL** - æœ€å¸¸ç”¨çš„å…³ç³»å‹æ•°æ®åº“
- **PostgreSQL** - åŠŸèƒ½å¼ºå¤§çš„å¼€æºæ•°æ®åº“

### 5. äº¤äº’å¼ç•Œé¢

- ğŸ¯ æ¸…æ™°çš„èœå•å¯¼èˆª
- ğŸ¨ å½©è‰²è¾“å‡ºå’Œè¯­æ³•é«˜äº®
- âŒ¨ï¸ æ”¯æŒä¸­æ–‡è¾“å…¥
- ğŸ“‹ è¡¨æ ¼å’Œå›¾è¡¨å±•ç¤º

## ğŸ“š ä½¿ç”¨æŒ‡å—

### ä¸»èœå•

AIQ æä¾›ç®€æ´çš„ä¸»èœå•ï¼š

```
AIQ - Main Menu
? config   - Manage LLM configuration
  source   - Manage database connections
  chat     - Query database with natural language
  exit     - Exit application
```

### é…ç½®ç®¡ç†

åœ¨ä¸»èœå•ä¸­é€‰æ‹© `config` å¯ä»¥ï¼š
- æŸ¥çœ‹å½“å‰ LLM é…ç½®
- æ›´æ–° API URL
- æ›´æ–° API Key
- æ›´æ–°æ¨¡å‹åç§°

### æ•°æ®æºç®¡ç†

åœ¨ä¸»èœå•ä¸­é€‰æ‹© `source` å¯ä»¥ï¼š
- æ·»åŠ æ–°çš„æ•°æ®åº“è¿æ¥
- æŸ¥çœ‹æ‰€æœ‰å·²é…ç½®çš„æ•°æ®æº
- åˆ é™¤æ•°æ®æº

### æŸ¥è¯¢æ¨¡å¼

åœ¨ä¸»èœå•ä¸­é€‰æ‹© `chat` è¿›å…¥æŸ¥è¯¢æ¨¡å¼ï¼š

#### å¤šè½®å¯¹è¯

AIQ æ”¯æŒå¤šè½®å¯¹è¯ï¼Œåœ¨æŸ¥è¯¢ä¹‹é—´ä¿æŒä¸Šä¸‹æ–‡ï¼š

```
aiq> æ˜¾ç¤ºä¸Šå‘¨çš„æ€»é”€å”®é¢
[ç”Ÿæˆ SQL å’Œç»“æœ...]

aiq> ä¿®æ”¹ä¸ºåªæ˜¾ç¤ºæœ€è¿‘ 3 å¤©
[AIQ ç†è§£"ä¿®æ”¹"æŒ‡çš„æ˜¯ä¹‹å‰çš„æŸ¥è¯¢ï¼Œç”Ÿæˆæ›´æ–°çš„ SQL...]

aiq> æ”¹ä¸ºæŒ‰äº§å“ç±»åˆ«åˆ†ç»„
[AIQ ç»§ç»­å¯¹è¯ï¼Œä¼˜åŒ–æŸ¥è¯¢...]
```

#### å¯¹è¯å‘½ä»¤

- `/history` - æŸ¥çœ‹å¯¹è¯å†å²
- `/clear` - æ¸…é™¤å¯¹è¯å†å²
- `exit` æˆ– `back` - é€€å‡ºèŠå¤©æ¨¡å¼ï¼ˆä¼šè¯å°†è‡ªåŠ¨ä¿å­˜ï¼‰

#### ä¼šè¯ç®¡ç†

é€€å‡ºèŠå¤©æ¨¡å¼æ—¶ï¼Œæ‚¨çš„å¯¹è¯ä¼šè¯ä¼šè‡ªåŠ¨ä¿å­˜ï¼š

```
å½“å‰ä¼šè¯å·²ä¿å­˜åˆ° ~/.aiqconfig/session_20260126100000.json
è¿è¡Œ 'aiq -s ~/.aiqconfig/session_20260126100000.json' ç»§ç»­ã€‚
```

è¦æ¢å¤ä¹‹å‰çš„ä¼šè¯ï¼š

```bash
aiq -s ~/.aiqconfig/session_20260126100000.json
```

æˆ–ä½¿ç”¨ `--session` æ ‡å¿—ï¼š

```bash
aiq --session ~/.aiqconfig/session_20260126100000.json
```

#### åŸºæœ¬ç”¨æ³•

1. **é€‰æ‹©æ•°æ®æº** - ä»å·²é…ç½®çš„æ•°æ®æºä¸­é€‰æ‹©ä¸€ä¸ª
2. **è¾“å…¥é—®é¢˜** - ç”¨è‡ªç„¶è¯­è¨€æè¿°ä½ çš„æŸ¥è¯¢éœ€æ±‚
3. **æŸ¥çœ‹ç»“æœ** - é€‰æ‹©ä»¥è¡¨æ ¼ã€å›¾è¡¨æˆ–ä¸¤è€…åŒæ—¶æ˜¾ç¤º
4. **é€‰æ‹©å›¾è¡¨ç±»å‹** - å¦‚æœæœ‰å¤šç§å›¾è¡¨ç±»å‹å¯é€‰ï¼Œé€‰æ‹©ä½ å–œæ¬¢çš„

### ç¤ºä¾‹æŸ¥è¯¢

```
# ç»Ÿè®¡æŸ¥è¯¢
aiq> ç»Ÿè®¡æ¯ä¸ªéƒ¨é—¨çš„å‘˜å·¥æ•°é‡

# è¶‹åŠ¿åˆ†æ
aiq> æ˜¾ç¤ºæœ€è¿‘ä¸€ä¸ªæœˆçš„é”€å”®è¶‹åŠ¿

# åˆ†å¸ƒåˆ†æ
aiq> æŸ¥çœ‹è®¢å•çŠ¶æ€çš„åˆ†å¸ƒæƒ…å†µ

# å…³è”åˆ†æ
aiq> åˆ†æå•†å“ä»·æ ¼å’Œé”€é‡çš„å…³ç³»
```

## âš™ï¸ é…ç½®

é…ç½®æ–‡ä»¶å­˜å‚¨åœ¨ `~/.aiqconfig/`ï¼š

- **config.yaml** - LLM é…ç½®ï¼ˆURLã€API Keyã€æ¨¡å‹ï¼‰
- **sources.yaml** - æ•°æ®åº“è¿æ¥é…ç½®
- **session_*.json** - å¯¹è¯ä¼šè¯æ–‡ä»¶ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰

### é…ç½®ç¤ºä¾‹

**config.yaml**
```yaml
llm:
  url: https://api.openai.com/v1
  apiKey: sk-...
  model: gpt-4
```

**sources.yaml**
```yaml
sources:
  - name: local-mysql
    type: MySQL
    host: localhost
    port: 3306
    database: testdb
    username: root
    password: password
```

## ğŸ› ï¸ å¼€å‘

### é¡¹ç›®ç»“æ„

```
aiq/
â”œâ”€â”€ cmd/aiq/          # ä¸»ç¨‹åºå…¥å£
â”œâ”€â”€ internal/
â”‚   â”œâ”€â”€ cli/          # CLI å‘½ä»¤å’Œèœå•ç³»ç»Ÿ
â”‚   â”œâ”€â”€ config/       # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ source/       # æ•°æ®æºç®¡ç†
â”‚   â”œâ”€â”€ sql/          # SQL äº¤äº’æ¨¡å¼ï¼ˆchat æ¨¡å¼ï¼‰
â”‚   â”œâ”€â”€ llm/          # LLM å®¢æˆ·ç«¯é›†æˆ
â”‚   â”œâ”€â”€ db/           # æ•°æ®åº“è¿æ¥å’ŒæŸ¥è¯¢æ‰§è¡Œ
â”‚   â”œâ”€â”€ chart/        # å›¾è¡¨å¯è§†åŒ–ï¼ˆæŸ±çŠ¶å›¾ã€æŠ˜çº¿å›¾ã€é¥¼å›¾ã€æ•£ç‚¹å›¾ï¼‰
â”‚   â””â”€â”€ ui/           # UI ç»„ä»¶ï¼ˆæç¤ºã€é¢œè‰²ã€åŠ è½½ã€å›¾è¡¨ï¼‰
â””â”€â”€ openspec/         # OpenSpec å˜æ›´ç®¡ç†
```

### æ„å»º

```bash
go build -o aiq cmd/aiq/main.go
```

### è¿è¡Œæµ‹è¯•

```bash
go test ./...
```

## ğŸ“ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [Apache License 2.0](LICENSE) è®¸å¯è¯ã€‚

## ğŸ¤ è´¡çŒ®

æ¬¢è¿è´¡çŒ®ï¼è¯·éšæ—¶æäº¤ Pull Requestã€‚

---

<div align="center">

**Made with â¤ï¸ using Go**

[æŠ¥å‘Šé—®é¢˜](https://github.com/aiq/aiq/issues) Â· [æäº¤åŠŸèƒ½è¯·æ±‚](https://github.com/aiq/aiq/issues) Â· [æŸ¥çœ‹æ–‡æ¡£](https://github.com/aiq/aiq)

</div>
